<!DOCTYPE html>
<html>
<head>
    <title>Simulacion Agente reflejo</title>
    <h1> Juan Pablo Garc√≠a</h1>
    <h1> Tarea 1 IA</h1>
    <br></br>
    <h1>Simulacion Agente reflejo</h1>
    
    <script>
        // Reflex agent function
        function reflex_agent(location, state) {
            if (state === "SUCIO") {
                return "LIMPIAR";
            } else {
                // Move right or left based on location
                const index = parseInt(location.charAt(1));
                if (index < 7) return "DERECHA"; // Move right if not at the last location
                else return "IZQUIERDA"; // Otherwise, move left
            }
        }

        // Function to simulate dirt and cleaning
        function randomizeDirt(states) {
            const randomIndex = Math.floor(Math.random() * 8) + 1; // Index 1 to 8 for dirt
            const newState = Math.random() < 0.5 ? "SUCIO" : "LIMPIAR";
            states[randomIndex] = newState;
        }

        // Test function to simulate the agent's behavior
        function test(states) {
            var location = states[0];
            var index = parseInt(location.charAt(1));
            var state = states[index];

            var action_result = reflex_agent(location, state);

            // Update the log
            document.getElementById("log").innerHTML += "<br>UBICACION: " + location + " | ESTADO: " + state + " | ACCION: " + action_result;

            // Update states based on the action
            if (action_result === "LIMPIAR") {
                states[index] = "LIMPIAR";
            } else if (action_result === "DERECHA") {
                if (index < 7) {
                    index += 1;
                }
                location = "L" + index;
            } else if (action_result === "IZQUIERDA") {
                if (index > 0) {
                    index -= 1;
                }
                location = "L" + index;
            }

            states[0] = location;
            states[index] = states[index] || "LIMPIAR"; // Ensure the state is defined

            // Randomly dirty a location
            randomizeDirt(states);

            // Recursively call test function after 2 seconds
            setTimeout(function() {
                test(states);
            }, 2000);
        }

        // Initialize states and start testing
        function startSimulation() {
            // Initialize states: [location, state0, state1, ..., state7]
            var states = ["L0", "SUCIO", "SUCIO", "SUCIO", "SUCIO", "SUCIO", "SUCIO", "SUCIO", "SUCIO"];
            test(states);
        }
    </script>
</head>
<body onload="startSimulation()">
    <div id="log"></div>
</body>
</html>
